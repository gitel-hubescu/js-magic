const e=document.createElement("div");e.style.whiteSpace="nowrap";e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.backgroundColor="white",e.style.padding="20px",e.style.border="1px solid #ccc",e.style.borderRadius="5px",e.style.boxShadow="0 0 10px rgba(0,0,0,0.1)",e.style.zIndex="1000";const t=document.createElement("form"),n=(new Date).toISOString().split("T")[0];t.innerHTML=`<h2>Disponibilitate padel</h2><div class='select_date'>  <label for="date">Data:</label><input type="date" id="date" value="${n}" required><label for="time_slot">Ora:</label><select id="time_slot" name="time_slot"><option value="any">Orice oră</option><option value="18:00">18:00</option><option value="19:30">19:30</option><option value="21:00">21:00</option><option value="22:30">22:30</option></select></div><div><h3><input type="checkbox" id="all_inside">Terenuri interior</h3><label><input type="checkbox" class="inside" name="inside" value="1" checked> Terenul 1</label><br><label><input type="checkbox" class="inside" name="inside" value="2" checked> Terenul 2</label><br><label><input type="checkbox" class="inside" name="inside" value="3" checked> Terenul 3</label><br><label><input type="checkbox" class="inside" name="inside" value="7" checked> Terenul 7</label><br><label><input type="checkbox" class="inside" name="inside" value="8" checked> Terenul 8</label><br></div><div><h3><input type="checkbox" id="all_outside">Terenuri exterior:</h3><label><input type="checkbox" class="outside" name="outside" value="4"> Terenul 4</label><br><label><input type="checkbox" class="outside" name="outside" value="5"> Terenul 5</label><br><label><input type="checkbox" class="outside" name="outside" value="6"> Terenul 6</label><br><label><input type="checkbox" class="outside" name="outside" value="9"> Terenul 9</label><br></div><div><h3>Mă interesează:</h3><label><input type="radio" name="flexy" value="1" checked> Ziua selectată</label><br><label><input type="radio" name="flexy" value="2"> Toată luna</label><br><br></div><button id='msubmit' type="submit">Arată-mi variantele</button>&nbsp;&nbsp;&nbsp;&nbsp;<button class="el-button" type="reset">Gata, știu ce pot rezerva</button>`,e.appendChild(t),document.body.appendChild(e);const l=document.getElementById("all_inside");l.checked="true";const o=document.getElementById("all_outside"),i=document.querySelectorAll(".inside"),d=document.querySelectorAll(".outside");l.addEventListener("change",(function(){i.forEach((e=>{e.checked=l.checked}))})),o.addEventListener("change",(function(){d.forEach((e=>{e.checked=o.checked}))})),i.forEach((e=>{e.addEventListener("change",(function(){l.checked=i.length===document.querySelectorAll(".inside:checked").length,l.indeterminate=document.querySelectorAll(".inside:checked").length>0&&document.querySelectorAll(".inside:checked").length<i.length}))})),d.forEach((e=>{e.addEventListener("change",(function(){o.checked=d.length===document.querySelectorAll(".outside:checked").length,o.indeterminate=document.querySelectorAll(".outside:checked").length>0&&document.querySelectorAll(".outside:checked").length<d.length}))})),t.addEventListener("reset",(function(t){t.preventDefault(),document.body.removeChild(e)})),t.addEventListener("submit",(function(e){e.preventDefault(),r();var t=document.getElementById("date").value;const n=document.getElementById("time_slot").value,l=document.querySelector('input[name="flexy"]:checked');2==(l?l.value:"None")&&(t="any");const o=[];document.querySelectorAll(".outside:checked").forEach((e=>{o.push(e.value)}));document.querySelectorAll(".inside:checked").forEach((e=>{o.push(e.value)}));var i=["Liber","Rezervat"];function d(e,t,n){let l=[],o=e.working_details;for(let e in o)if("any"==t||t==e)for(let t in o[e])(n.includes("any")||n.includes(o[e][t].start_time))&&(l[e]||(l[e]=[]),l[e].push(o[e][t].start_time+"-"+o[e][t].end_time+" - "+i[parseInt(o[e][t].is_booked,10)]));return l}var a=document.querySelector('[name="_wpnonce"]').value;let c=[];for(let e=0;e<o.length;e++){const l=new URLSearchParams;l.append("action","bookingpress_retrieve_entire_month_details"),l.append("service_id",o[e]),l.append("selected_service",o[e]),l.append("selected_date",t),l.append("is_preselected","true"),l.append("_wpnonce",a),fetch("https://padelcenter.ro/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l.toString()}).then((e=>e.json())).then((e=>{c.push(d(e,t,[n]))})).catch((t=>{console.error(`Error for service_id ${o[e]}:`,t)}))}function r(){m=document.getElementById("secondModal"),m&&document.body.removeChild(m)}const s=e=>{let t=[];for(let n in e)for(let l in e[n]){t[l]||(t[l]=`<h2>${l}:</h2>`),t[l].includes(`T${o[n]}`)||(t[l]+=`<h3>T${o[n]}:</h3>`);for(let o in e[n][l]){const i=e[n][l][o].includes("Rezervat")?"red":"green";t[l]+=`<label style="color:${i}">${e[n][l][o]}</label><br>`}}!function(e,t,n=[]){(u=document.createElement("div")).id="secondModal",u.style.whiteSpace="nowrap",u.style.position="fixed",u.style.top="50%",u.style.left="50%",u.style.transform="translate(-50%, -50%)",u.style.backgroundColor="white",u.style.padding="20px",u.style.border="1px solid #ccc",u.style.borderRadius="5px",u.style.boxShadow="0 0 10px rgba(0,0,0,0.1)",u.style.zIndex="1000",u.style.maxHeight="50%",u.style.overflowY="auto",u.innerHTML=e,n.forEach((e=>{const t=document.createElement("button");t.textContent=e.text,t.style.marginTop="10px",t.classList.add("el-button"),t.addEventListener("click",e.onClick),u.appendChild(t)})),document.body.appendChild(u)}(Object.values(t).join(" "),0,[{text:"Bun, merci",onClick:r}])};var u;const p=o.length;new Promise((e=>{!function t(){if(c.length>=p)e();else{var n=document.getElementById("msubmit");const e=n.textContent.length;n.textContent=10==e?"Verific.":8==e?"Verific..":"Verific...",setTimeout(t,100)}}()})).then((()=>{document.getElementById("msubmit").textContent="Arată-mi variantele",s(c)}))}));